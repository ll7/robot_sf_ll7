{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://ll7.github.io/robot_sf/scenarios.schema.json",
    "title": "Social Navigation Benchmark Scenario Matrix",
    "description": "Schema for scenario parameter matrices used by robot_sf_bench run/baseline",
    "type": "array",
    "minItems": 1,
    "items": {
        "type": "object",
        "oneOf": [
            {
                "required": [
                    "id",
                    "density",
                    "flow",
                    "obstacle"
                ]
            },
            {
                "required": [
                    "name",
                    "map_file",
                    "simulation_config"
                ]
            }
        ],
        "properties": {
            "id": {
                "type": "string",
                "minLength": 1
            },
            "density": {
                "type": "string",
                "enum": [
                    "low",
                    "med",
                    "high"
                ]
            },
            "flow": {
                "type": "string",
                "enum": [
                    "uni",
                    "bi",
                    "cross",
                    "merge",
                    "converging",
                    "perpendicular",
                    "enter",
                    "exit"
                ]
            },
            "obstacle": {
                "type": "string",
                "enum": [
                    "open",
                    "bottleneck",
                    "maze"
                ]
            },
            "groups": {
                "description": "Fraction of pedestrians in groups (0.0â€“1.0)",
                "type": "number",
                "minimum": 0.0,
                "maximum": 1.0
            },
            "speed_var": {
                "description": "Speed variation level",
                "type": "string",
                "enum": [
                    "low",
                    "med",
                    "high"
                ]
            },
            "goal_topology": {
                "type": "string",
                "enum": [
                    "point",
                    "swap",
                    "circulate"
                ]
            },
            "robot_context": {
                "type": "string",
                "enum": [
                    "ahead",
                    "behind",
                    "embedded"
                ]
            },
            "repeats": {
                "type": "integer",
                "minimum": 1
            },
            "name": {
                "type": "string",
                "minLength": 1
            },
            "scenario_id": {
                "type": "string",
                "minLength": 1
            },
            "map_file": {
                "type": "string",
                "minLength": 1
            },
            "simulation_config": {
                "type": "object"
            },
            "robot_config": {
                "type": "object"
            },
            "single_pedestrians": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "id": {
                            "type": "string"
                        },
                        "goal_poi": {
                            "type": "string"
                        },
                        "start_poi": {
                            "type": "string"
                        },
                        "speed_m_s": {
                            "type": "number"
                        },
                        "wait_at": {
                            "type": "array"
                        },
                        "role": {
                            "type": "string"
                        },
                        "role_target_id": {
                            "type": "string"
                        },
                        "role_offset": {
                            "type": "array"
                        },
                        "note": {
                            "type": "string"
                        }
                    },
                    "additionalProperties": true
                }
            },
            "metadata": {
                "type": "object"
            },
            "seeds": {
                "type": "array",
                "items": {
                    "type": "integer"
                }
            },
            "supported": {
                "type": "boolean"
            }
        },
        "additionalProperties": true
    }
}
